{"version":3,"file":"RadarCursor.js","sourceRoot":"","sources":["../../../../../../src/.internal/charts/radar/RadarCursor.ts"],"names":[],"mappings":"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","sourcesContent":["import type { IPoint } from \"../../core/util/IPoint\";\nimport type { RadarChart } from \"./RadarChart\"\nimport type { Percent } from \"../../core/util/Percent\";\nimport type { Tooltip } from \"../../core/render/Tooltip\";\n\nimport { XYCursor, IXYCursorSettings, IXYCursorPrivate, IXYCursorEvents } from \"../xy/XYCursor\";\nimport { p100 } from \"../../core/util/Percent\";\nimport { arc } from \"d3-shape\";\n\nimport * as $math from \"../../core/util/Math\";\nimport * as $utils from \"../../core/util/Utils\";\n\n\nexport interface IRadarCursorSettings extends IXYCursorSettings {\n\n\t/**\n\t * Cursor's inner radius.\n\t */\n\tinnerRadius?: number | Percent;\n\n\t/**\n\t * Cursor's inner radius.\n\t */\n\tradius?: number | Percent;\n\n\t//xAxis?: Axis<AxisRendererCircular>;\n\t//yAxis?: Axis<AxisRendererRadial>;\n\n\t/**\n\t * Cursor's position angle in degrees.\n\t */\n\tstartAngle?: number;\n\n\t/**\n\t * Cursor's selection end angle in degrees.\n\t */\n\tendAngle?: number;\n\n}\n\nexport interface IRadarCursorPrivate extends IXYCursorPrivate {\n\n\t/**\n\t * Actual radius of the cursor in pixels.\n\t */\n\tradius: number;\n\n\t/**\n\t * Actual inner radius of the cursor in pixels.\n\t */\n\tinnerRadius: number;\n\n\t/**\n\t * Actual start angle of the cursor in degrees.\n\t */\n\tstartAngle: number;\n\n\t/**\n\t * Actual end angle of the cursor in degrees.\n\t */\n\tendAngle: number;\n\n}\n\nexport interface IRadarCursorEvents extends IXYCursorEvents {\n}\n\n/**\n * Creates a cursor for a [[RadarChart]].\n *\n * @see {@link https://www.amcharts.com/docs/v5/charts/radar-chart/#Cursor} for more info\n */\nexport class RadarCursor extends XYCursor {\n\tpublic static className: string = \"RadarCursor\";\n\tpublic static classNames: Array<string> = XYCursor.classNames.concat([RadarCursor.className]);\n\n\tdeclare public _settings: IRadarCursorSettings;\n\tdeclare public _privateSettings: IRadarCursorPrivate;\n\tdeclare public _events: IRadarCursorEvents;\n\n\t/**\n\t * A chart cursor is attached to.\n\t */\n\tdeclare public chart: RadarChart | undefined;\n\n\tprotected _fillGenerator = arc();\n\n\tprotected _afterNew() {\n\t\tthis._settings.themeTags = $utils.mergeTags(this._settings.themeTags, [\"radar\", \"cursor\"]);\n\n\t\tsuper._afterNew();\n\t}\n\n\tprotected _handleXLine() {\n\n\t}\n\n\tprotected _handleYLine() {\n\n\t}\n\n\tprotected _getPosition(point: IPoint): IPoint {\n\t\tconst radius = Math.hypot(point.x, point.y);\n\t\tlet angle = $math.normalizeAngle(Math.atan2(point.y, point.x) * $math.DEGREES);\n\n\t\tconst innerRadius = this.getPrivate(\"innerRadius\");\n\n\t\tlet startAngle = $math.normalizeAngle(this.getPrivate(\"startAngle\"));\n\t\tlet endAngle = $math.normalizeAngle(this.getPrivate(\"endAngle\"));\n\n\t\tif (endAngle < startAngle || endAngle == startAngle) {\n\t\t\tif (angle < startAngle) {\n\t\t\t\tangle += 360\n\t\t\t}\n\n\t\t\tendAngle = endAngle + 360;\n\t\t}\n\n\t\tlet xPos = (angle - startAngle) / (endAngle - startAngle);\n\n\t\tif (xPos < 0) {\n\t\t\txPos = 1 + xPos;\n\t\t}\n\n\t\tif (xPos < 0.003) {\n\t\t\txPos = 0;\n\t\t}\n\n\t\tif (xPos > 0.997) {\n\t\t\txPos = 1;\n\t\t}\n\n\t\treturn { x: xPos, y: (radius - innerRadius) / (this.getPrivate(\"radius\") - innerRadius) };\n\t}\n\n\tprotected _getPoint(positionX: number, positionY: number): IPoint {\n\n\t\tconst innerRadius = this.getPrivate(\"innerRadius\");\n\t\tconst startAngle = this.getPrivate(\"startAngle\");\n\t\tconst endAngle = this.getPrivate(\"endAngle\");\n\t\tconst radius = this.getPrivate(\"radius\");\n\n\t\tconst angle = startAngle + positionX * (endAngle - startAngle);\n\t\tconst r = innerRadius + (radius - innerRadius) * positionY;\n\n\t\treturn { x: r * $math.cos(angle), y: r * $math.sin(angle) };\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic updateLayout() {\n\t\tconst chart = this.chart;\n\t\tif (chart) {\n\t\t\tconst radius = chart.getPrivate(\"radius\", 0);\n\n\t\t\tthis.setPrivate(\"radius\", $utils.relativeToValue(this.get(\"radius\", p100), radius));\n\n\t\t\tlet innerRadius = $utils.relativeToValue(this.get(\"innerRadius\", chart.getPrivate(\"innerRadius\", 0)), radius);\n\t\t\tif (innerRadius < 0) {\n\t\t\t\tinnerRadius = radius + innerRadius;\n\t\t\t}\n\n\t\t\tthis.setPrivate(\"innerRadius\", innerRadius);\n\n\t\t\tlet startAngle = this.get(\"startAngle\", chart.get(\"startAngle\", -90));\n\t\t\tlet endAngle = this.get(\"endAngle\", chart.get(\"endAngle\", 270));\n\n\t\t\tthis.setPrivate(\"startAngle\", startAngle);\n\t\t\tthis.setPrivate(\"endAngle\", endAngle);\n\t\t}\n\t}\n\n\tprotected _updateLines(x: number, y: number) {\n\t\tif (!this._tooltipX) {\n\t\t\tthis._drawXLine(x, y);\n\t\t}\n\t\tif (!this._tooltipY) {\n\t\t\tthis._drawYLine(x, y);\n\t\t}\n\t}\n\n\tprotected _drawXLine(x: number, y: number) {\n\t\tconst innerRadius = this.getPrivate(\"innerRadius\");\n\t\tconst radius = this.getPrivate(\"radius\");\n\t\tconst angle = Math.atan2(y, x);\n\n\t\tthis.lineX.set(\"draw\", (display) => {\n\t\t\tdisplay.moveTo(innerRadius * Math.cos(angle), innerRadius * Math.sin(angle));\n\t\t\tdisplay.lineTo(radius * Math.cos(angle), radius * Math.sin(angle));\n\t\t})\n\t}\n\n\tprotected _drawYLine(x: number, y: number) {\n\t\tconst positionRadius = Math.hypot(x, y);\n\n\t\tthis.lineY.set(\"draw\", (display) => {\n\t\t\tdisplay.arc(0, 0, positionRadius, this.getPrivate(\"startAngle\", 0) * $math.RADIANS, this.getPrivate(\"endAngle\", 0) * $math.RADIANS);\n\t\t})\n\t}\n\n\tprotected _updateXLine(tooltip: Tooltip) {\n\t\tlet point = tooltip.get(\"pointTo\");\n\t\tif (point) {\n\t\t\tpoint = this._display.toLocal(point);\n\t\t\tthis._drawXLine(point.x, point.y);\n\t\t}\n\t}\n\n\tprotected _updateYLine(tooltip: Tooltip) {\n\t\tlet point = tooltip.get(\"pointTo\")\n\t\tif (point) {\n\t\t\tpoint = this._display.toLocal(point);\n\t\t\tthis._drawYLine(point.x, point.y);\n\t\t}\n\t}\n\n\tprotected _inPlot(point: IPoint): boolean {\n\t\tconst chart = this.chart;\n\n\t\tif (chart) {\n\t\t\treturn chart.inPlot(point, this.getPrivate(\"radius\"), this.getPrivate(\"innerRadius\"));\n\t\t}\n\t\treturn false;\n\t}\n\n\tprotected _updateSelection(point: IPoint) {\n\n\t\tthis.selection.set(\"draw\", (display) => {\n\t\t\tconst behavior = this.get(\"behavior\");\n\n\t\t\tconst downPoint = this._downPoint;\n\t\t\tconst cursorStartAngle = this.getPrivate(\"startAngle\");\n\t\t\tconst cursorEndAngle = this.getPrivate(\"endAngle\");\n\t\t\tlet cursorRadius = this.getPrivate(\"radius\");\n\t\t\tlet cursorInnerRadius = this.getPrivate(\"innerRadius\");\n\n\t\t\tif (cursorRadius < cursorInnerRadius) {\n\t\t\t\t[cursorRadius, cursorInnerRadius] = [cursorInnerRadius, cursorRadius];\n\t\t\t}\n\n\t\t\tlet startAngle = cursorStartAngle;\n\t\t\tlet endAngle = cursorEndAngle;\n\t\t\tlet radius = cursorRadius;\n\t\t\tlet innerRadius = cursorInnerRadius;\n\n\t\t\tif (downPoint) {\n\t\t\t\tif (behavior == \"zoomXY\" || behavior == \"selectXY\") {\n\t\t\t\t\tstartAngle = Math.atan2(downPoint.y, downPoint.x) * $math.DEGREES;\n\t\t\t\t\tendAngle = Math.atan2(point.y, point.x) * $math.DEGREES;\n\t\t\t\t\tinnerRadius = Math.hypot(downPoint.x, downPoint.y);\n\t\t\t\t\tradius = Math.hypot(point.x, point.y);\n\t\t\t\t}\n\t\t\t\telse if (behavior == \"zoomX\" || behavior == \"selectX\") {\n\t\t\t\t\tstartAngle = Math.atan2(downPoint.y, downPoint.x) * $math.DEGREES;\n\t\t\t\t\tendAngle = Math.atan2(point.y, point.x) * $math.DEGREES;\n\t\t\t\t}\n\t\t\t\telse if (behavior == \"zoomY\" || behavior == \"selectY\") {\n\t\t\t\t\tinnerRadius = Math.hypot(downPoint.x, downPoint.y);\n\t\t\t\t\tradius = Math.hypot(point.x, point.y);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tinnerRadius = $math.fitToRange(innerRadius, cursorInnerRadius, cursorRadius);\n\t\t\tradius = $math.fitToRange(radius, cursorInnerRadius, cursorRadius);\n\n\t\t\tstartAngle = $math.fitAngleToRange(startAngle, cursorStartAngle, cursorEndAngle);\n\t\t\tendAngle = $math.fitAngleToRange(endAngle, cursorStartAngle, cursorEndAngle);\n\n\t\t\tif (startAngle == endAngle) {\n\t\t\t\tendAngle = startAngle + 360;\n\t\t\t}\n\n\t\t\tstartAngle *= $math.RADIANS;\n\t\t\tendAngle *= $math.RADIANS;\n\n\t\t\tthis._fillGenerator.context(display as any);\n\t\t\tthis._fillGenerator({ innerRadius: innerRadius, outerRadius: radius, startAngle: startAngle + Math.PI / 2, endAngle: endAngle + Math.PI / 2 });\n\t\t})\n\t}\n}\n"]}