{"version":3,"file":"DropdownControl.js","sourceRoot":"","sources":["../../../../../../../src/.internal/charts/stock/toolbar/DropdownControl.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,YAAY,EAAoE,MAAM,gBAAgB,CAAC;AAChH,OAAO,EAAE,QAAQ,EAAE,MAAM,YAAY,CAAC;AAgBtC;;;;;;GAMG;AACH,MAAM,OAAO,eAAgB,SAAQ,YAAY;IAQtC,SAAS;QAClB,KAAK,CAAC,SAAS,EAAE,CAAC;QAElB,MAAM,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAE,CAAC;QAC1C,MAAM,CAAC,SAAS,GAAG,MAAM,CAAC,SAAS,GAAG,4BAA4B,CAAC;IACpE,CAAC;IAEM,cAAc;QACpB,KAAK,CAAC,cAAc,EAAE,CAAC;QACvB,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE;YACzB,MAAM,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,CAAC;YAC/C,IAAI,SAAS,EAAE;gBACd,IAAI,CAAC,UAAU,CAAC,WAAW,CAAE,CAAC,SAAS,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;aAC/D;SACD;IACF,CAAC;IAES,aAAa;QACtB,KAAK,CAAC,aAAa,EAAE,CAAC;QAEtB,cAAc;QACd,MAAM,gBAAgB,GAAQ;YAC7B,OAAO,EAAE,IAAI;YACb,MAAM,EAAE,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC;YACjC,UAAU,EAAE,IAAI,CAAC,GAAG,CAAC,YAAY,EAAE,KAAK,CAAC;SACzC,CAAA;QAED,MAAM,QAAQ,GAAG,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,EAAE,gBAAgB,CAAC,CAAC;QAC5D,IAAI,CAAC,UAAU,CAAC,UAAU,EAAE,QAAQ,CAAC,CAAC;QAEtC,MAAM,SAAS,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QAChD,SAAS,CAAC,SAAS,GAAG,uBAAuB,CAAC;QAE9C,QAAQ,CAAC,UAAU,CAAC,WAAW,CAAE,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;QACzD,IAAI,CAAC,UAAU,CAAC,WAAW,EAAE,SAAS,CAAC,CAAC;QAExC,MAAM,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,EAAE,EAAE,CAAC,CAAC;QAClC,SAAS,CAAC,SAAS,GAAG,IAAI,CAAC;QAE3B,QAAQ,CAAC,MAAM,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,GAAG,EAAE,EAAE;YACpC,IAAI,CAAC,GAAG,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC;QAC3B,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,EAAE,CAAC,QAAQ,EAAE,CAAC,MAAM,EAAE,EAAE;YAC5B,IAAI,MAAM,EAAE;gBACX,IAAI,CAAC,UAAU,CAAC,GAAG,EAAE,CAAC,QAAQ,CAAC,IAAI,EAAE,EAAE,EAAE,CAAC,CAAC;aAC3C;iBACI;gBACJ,QAAQ,CAAC,IAAI,EAAE,CAAC;aAChB;QACF,CAAC,CAAC,CAAC;IACJ,CAAC;IAES,QAAQ;QACjB,KAAK,CAAC,QAAQ,EAAE,CAAC;IAClB,CAAC;;AA9DD;;;;WAAkC,iBAAiB;GAAC;AACpD;;;;WAA0C,YAAY,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC;GAAC","sourcesContent":["import { StockControl, IStockControlSettings, IStockControlPrivate, IStockControlEvents } from \"./StockControl\";\r\nimport { Dropdown } from \"./Dropdown\";\r\n\r\nexport interface IDropdownControlSettings extends IStockControlSettings {\r\n\tfixedLabel?: boolean;\r\n\tscrollable?: boolean;\r\n\thtml?: string;\r\n}\r\n\r\nexport interface IDropdownControlPrivate extends IStockControlPrivate {\r\n\tdropdown?: Dropdown;\r\n\tcontainer?: HTMLDivElement;\r\n}\r\n\r\nexport interface IDropdownControlEvents extends IStockControlEvents {\r\n}\r\n\r\n/**\r\n * A generic control which creates a searchable list of items in a dropdown.\r\n *\r\n * Can be used in a [[StockToolbar]].\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/charts/stock/toolbar/dropdown-list-control/} for more info\r\n */\r\nexport class DropdownControl extends StockControl {\r\n\tpublic static className: string = \"DropdownControl\";\r\n\tpublic static classNames: Array<string> = StockControl.classNames.concat([DropdownControl.className]);\r\n\r\n\tdeclare public _settings: IDropdownControlSettings;\r\n\tdeclare public _privateSettings: IDropdownControlPrivate;\r\n\tdeclare public _events: IDropdownControlEvents;\r\n\r\n\tprotected _afterNew() {\r\n\t\tsuper._afterNew();\r\n\r\n\t\tconst button = this.getPrivate(\"button\")!;\r\n\t\tbutton.className = button.className + \" am5stock-control-dropdown\";\r\n\t}\r\n\r\n\tpublic _beforeChanged() {\r\n\t\tsuper._beforeChanged();\r\n\t\tif (this.isDirty(\"html\")) {\r\n\t\t\tconst container = this.getPrivate(\"container\");\r\n\t\t\tif (container) {\r\n\t\t\t\tthis.getPrivate(\"container\")!.innerHTML = this.get(\"html\", \"\");\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprotected _initElements(): void {\r\n\t\tsuper._initElements();\r\n\r\n\t\t// Create list\r\n\t\tconst dropdownSettings: any = {\r\n\t\t\tcontrol: this,\r\n\t\t\tparent: this.getPrivate(\"button\"),\r\n\t\t\tscrollable: this.get(\"scrollable\", false)\r\n\t\t}\r\n\r\n\t\tconst dropdown = Dropdown.new(this._root, dropdownSettings);\r\n\t\tthis.setPrivate(\"dropdown\", dropdown);\r\n\r\n\t\tconst container = document.createElement(\"div\");\r\n\t\tcontainer.className = \"am5stock-control-list\";\r\n\r\n\t\tdropdown.getPrivate(\"container\")!.appendChild(container);\r\n\t\tthis.setPrivate(\"container\", container);\r\n\r\n\t\tconst html = this.get(\"html\", \"\");\r\n\t\tcontainer.innerHTML = html;\r\n\r\n\t\tdropdown.events.on(\"closed\", (_ev) => {\r\n\t\t\tthis.set(\"active\", false);\r\n\t\t});\r\n\r\n\t\tthis.on(\"active\", (active) => {\r\n\t\t\tif (active) {\r\n\t\t\t\tthis.setTimeout(() => dropdown.show(), 10);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tdropdown.hide();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tprotected _dispose(): void {\r\n\t\tsuper._dispose();\r\n\t}\r\n\r\n\r\n}\r\n"]}