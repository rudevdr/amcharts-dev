{"version":3,"file":"StockToolbar.js","sourceRoot":"","sources":["../../../../../../../src/.internal/charts/stock/toolbar/StockToolbar.ts"],"names":[],"mappings":"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","sourcesContent":["import type { IDisposer } from \"../../../core/util/Disposer\";\r\nimport type { StockChart } from \"../StockChart\";\r\nimport type { StockControl } from \"./StockControl\";\r\n\r\nimport { Entity, IEntitySettings, IEntityPrivate, IEntityEvents } from \"../../../core/util/Entity\"\r\nimport StockToolbarCSS from \"./StockToolbarCSS\";\r\n\r\nimport * as $array from \"../../../core/util/Array\";\r\nimport * as $utils from \"../../../core/util/Utils\";\r\n//import * as $type from \"../../../core/util/Type\";\r\n\r\nexport interface IStockToolbarSettings extends IEntitySettings {\r\n\r\n\t/**\r\n\t * A [[StockChart]] the toolbar is for.\r\n\t */\r\n\tstockChart: StockChart;\r\n\r\n\t/**\r\n\t * A reference to an element in the document to place tools in.\r\n\t */\r\n\tcontainer: HTMLElement;\r\n\r\n\t/**\r\n\t * A list of tools to show in toolbar.\r\n\t */\r\n\tcontrols?: StockControl[];\r\n\r\n\t/**\r\n\t * If set to `false` the toolbar will not load default CSS.\r\n\t *\r\n\t * @default true\r\n\t */\r\n\tuseDefaultCSS?: boolean;\r\n\r\n\t/**\r\n\t * Menu will disable all interactions for the underlying chart when using\r\n\t * tools.\r\n\t *\r\n\t * @default true\r\n\t */\r\n\tdeactivateRoot?: boolean;\r\n\r\n}\r\n\r\nexport interface IStockToolbarPrivate extends IEntityPrivate {\r\n}\r\n\r\nexport interface IStockToolbarEvents extends IEntityEvents {\r\n\tcreated: {}\r\n}\r\n\r\n/**\r\n * Builds a toolbar for [[StockChart]].\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/charts/stock/toolbar/} for more info\r\n */\r\nexport class StockToolbar extends Entity {\r\n\tpublic static className: string = \"StockToolbar\";\r\n\tpublic static classNames: Array<string> = Entity.classNames.concat([StockToolbar.className]);\r\n\r\n\tdeclare public _settings: IStockToolbarSettings;\r\n\tdeclare public _privateSettings: IStockToolbarPrivate;\r\n\tdeclare public _events: IStockToolbarEvents;\r\n\r\n\tprivate _cssDisposer?: IDisposer;\r\n\r\n\tprotected _afterNew() {\r\n\t\tsuper._afterNew();\r\n\r\n\t\t// Inherit default themes from chart\r\n\t\tthis._defaultThemes = this.get(\"stockChart\")._defaultThemes;\r\n\t\tsuper._afterNewApplyThemes();\r\n\r\n\t\tthis._initControls();\r\n\t\tthis.loadDefaultCSS();\r\n\r\n\t\tthis._root.addDisposer(this);\r\n\r\n\t\tthis.events.dispatch(\"created\", {\r\n\t\t\ttype: \"created\",\r\n\t\t\ttarget: this\r\n\t\t});\r\n\t}\r\n\r\n\tpublic _afterChanged() {\r\n\t\tsuper._afterChanged();\r\n\r\n\t\tif (this.isDirty(\"container\")) {\r\n\t\t\t// TODO\r\n\t\t}\r\n\r\n\t\tif (this.isDirty(\"useDefaultCSS\")) {\r\n\t\t\tif (this.get(\"useDefaultCSS\")) {\r\n\t\t\t\tthis.loadDefaultCSS();\r\n\t\t\t}\r\n\t\t\telse if (this._cssDisposer) {\r\n\t\t\t\tthis._cssDisposer.dispose();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (this.isDirty(\"controls\")) {\r\n\t\t\tthis._initControls();\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tprotected _dispose(): void {\r\n\t\tsuper._dispose();\r\n\r\n\t\tif (this._cssDisposer) {\r\n\t\t\tthis._cssDisposer.dispose();\r\n\t\t}\r\n\r\n\t\tconst controls = this.get(\"controls\", []);\r\n\t\t$array.each(controls, (control, _index) => {\r\n\t\t\tcontrol.dispose();\r\n\t\t});\r\n\t}\r\n\r\n\tprivate _initControls(): void {\r\n\t\tconst controls = this.get(\"controls\", []);\r\n\t\t$array.each(controls, (control, _index) => {\r\n\t\t\tif (!control.getPrivate(\"toolbar\")) {\r\n\t\t\t\t// @todo insert at specific index\r\n\t\t\t\tcontrol.setPrivate(\"toolbar\", this);\r\n\t\t\t\tthis.get(\"container\")!.appendChild(control.getPrivate(\"button\")!);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Loads the default CSS.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t */\r\n\tpublic loadDefaultCSS(): void {\r\n\t\tconst disposer = StockToolbarCSS($utils.getShadowRoot(this._root.dom), this._root);\r\n\t\tthis._disposers.push(disposer);\r\n\t\tthis._cssDisposer = disposer;\r\n\t}\r\n\r\n}"]}