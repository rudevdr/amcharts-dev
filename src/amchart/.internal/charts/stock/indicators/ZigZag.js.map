{"version":3,"file":"ZigZag.js","sourceRoot":"","sources":["../../../../../../../src/.internal/charts/stock/indicators/ZigZag.ts"],"names":[],"mappings":"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","sourcesContent":["import { Indicator, IIndicatorSettings, IIndicatorPrivate, IIndicatorEvents, IIndicatorEditableSetting } from \"./Indicator\";\r\nimport { LineSeries } from \"../../xy/series/LineSeries\";\r\n\r\n\r\nexport interface IZigZagSettings extends IIndicatorSettings {\r\n\t/**\r\n\t * Percentage of price movement you want to set as your threshold\r\n\t */\r\n\tdeviation?: number;\r\n\r\n\t/**\r\n\t * The minimum number of price bars required where there is no secondary high or low.\r\n\t */\r\n\tdepth?: number;\r\n}\r\n\r\nexport interface IZigZagPrivate extends IIndicatorPrivate {\r\n}\r\n\r\nexport interface IZigZagEvents extends IIndicatorEvents {\r\n}\r\n\r\n/**\r\n * An implementation of a [[StockChart]] indicator.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/charts/stock/indicators/} for more info\r\n */\r\nexport class ZigZag extends Indicator {\r\n\tpublic static className: string = \"ZigZag\";\r\n\tpublic static classNames: Array<string> = Indicator.classNames.concat([ZigZag.className]);\r\n\r\n\tdeclare public _settings: IZigZagSettings;\r\n\tdeclare public _privateSettings: IZigZagPrivate;\r\n\tdeclare public _events: IZigZagEvents;\r\n\r\n\t/**\r\n\t * Indicator series.\r\n\t */\r\n\tdeclare public series: LineSeries;\r\n\r\n\tpublic _editableSettings: IIndicatorEditableSetting[] = [{\r\n\t\tkey: \"deviation\",\r\n\t\tname: this.root.language.translateAny(\"Deviation\"),\r\n\t\ttype: \"number\"\r\n\t}, {\r\n\t\tkey: \"depth\",\r\n\t\tname: this.root.language.translateAny(\"Depth\"),\r\n\t\ttype: \"number\"\r\n\t}, {\r\n\t\tkey: \"seriesColor\",\r\n\t\tname: this.root.language.translateAny(\"Color\"),\r\n\t\ttype: \"color\"\r\n\t}];\r\n\r\n\tpublic _prepareChildren() {\r\n\r\n\t\tif (this.isDirty(\"deviation\") || this.isDirty(\"depth\")) {\r\n\t\t\tthis._dataDirty = true;\r\n\t\t\tthis.setCustomData(\"deviation\", this.get(\"deviation\"));\r\n\t\t\tthis.setCustomData(\"depth\", this.get(\"depth\"));\r\n\t\t}\r\n\r\n\t\tsuper._prepareChildren();\r\n\t}\r\n\r\n\tprotected _afterNew() {\r\n\t\tsuper._afterNew();\r\n\r\n\t\tconst stockSeries = this.get(\"stockSeries\");\r\n\t\tconst chart = stockSeries.chart;\r\n\r\n\t\tif (chart) {\r\n\t\t\tconst series = chart.series.push(LineSeries.new(this._root, {\r\n\t\t\t\tvalueXField: \"time\",\r\n\t\t\t\tvalueYField: \"zigzag\",\r\n\t\t\t\tgroupDataDisabled: true,\r\n\t\t\t\tcalculateAggregates: true,\r\n\t\t\t\txAxis: stockSeries.get(\"xAxis\"),\r\n\t\t\t\tyAxis: stockSeries.get(\"yAxis\"),\r\n\t\t\t\tthemeTags: [\"indicator\", \"zigzag\"],\r\n\t\t\t\tname: \"ZigZag\",\r\n\t\t\t\tsnapTooltip: true\r\n\t\t\t}))\r\n\t\t\tseries.setPrivate(\"baseValueSeries\", stockSeries);\r\n\t\t\tthis.series = series;\r\n\r\n\t\t\tthis._handleLegend(series);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * @ignore\r\n\t */\r\n\tpublic prepareData() {\r\n\t\tif (this.series) {\r\n\t\t\tconst deviation = this.get(\"deviation\", 5) / 100;\r\n\t\t\tconst stockSeries = this.get(\"stockSeries\");\r\n\t\t\tconst data: Array<any> = [];\r\n\t\t\tif (stockSeries) {\r\n\t\t\t\tconst dataItems = stockSeries.dataItems;\r\n\t\t\t\tif (dataItems.length > 1) {\r\n\t\t\t\t\tlet firstDataItem = dataItems[0];\r\n\r\n\t\t\t\t\tlet goesUp = false;\r\n\t\t\t\t\tlet firstTime = firstDataItem.get(\"valueX\", 0);\r\n\t\t\t\t\tlet firstValue = firstDataItem.get(\"valueY\");\r\n\t\t\t\t\tlet firstHigh = firstDataItem.get(\"highValueY\", firstValue);\r\n\t\t\t\t\tlet firstLow = firstDataItem.get(\"lowValueY\", firstValue);\r\n\r\n\t\t\t\t\tlet zigZagTime: number | undefined;\r\n\t\t\t\t\tlet zigZagValue: number | undefined;\r\n\r\n\t\t\t\t\tlet j = 1;\r\n\t\t\t\t\tfor (let i = 1, len = dataItems.length; i < len; i++) {\r\n\t\t\t\t\t\tlet dataItem = dataItems[i];\r\n\t\t\t\t\t\tlet value = dataItem.get(\"value\", 0);\r\n\t\t\t\t\t\tlet low = dataItem.get(\"lowValueY\", value);\r\n\t\t\t\t\t\tlet high = dataItem.get(\"highValueY\", value);\r\n\t\t\t\t\t\tlet time = dataItem.get(\"valueX\", 0);\r\n\r\n\t\t\t\t\t\tif (low <= Number(firstHigh) * (1 - deviation)) {\r\n\t\t\t\t\t\t\tdata.push({ time: firstTime, zigzag: firstHigh });\r\n\t\t\t\t\t\t\tzigZagTime = time;\r\n\t\t\t\t\t\t\tzigZagValue = low;\r\n\t\t\t\t\t\t\tgoesUp = true;\r\n\t\t\t\t\t\t\tj = i;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (high >= Number(firstLow) * (1 + deviation)) {\r\n\t\t\t\t\t\t\tdata.push({ time: firstTime, zigzag: firstLow });\r\n\t\t\t\t\t\t\tzigZagTime = time;\r\n\t\t\t\t\t\t\tzigZagValue = high;\r\n\t\t\t\t\t\t\tgoesUp = false;\r\n\t\t\t\t\t\t\tj = i;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (zigZagValue != null) {\r\n\t\t\t\t\t\tlet depth = this.get(\"depth\", 3);\r\n\t\t\t\t\t\tfor (let i = j - 1, len = dataItems.length; i < len; i++) {\r\n\t\t\t\t\t\t\tlet dataItem = dataItems[i];\r\n\t\t\t\t\t\t\tlet value = dataItem.get(\"value\", 0);\r\n\t\t\t\t\t\t\tlet low = dataItem.get(\"lowValueY\", value);\r\n\t\t\t\t\t\t\tlet high = dataItem.get(\"highValueY\", value);\r\n\t\t\t\t\t\t\tlet time = dataItem.get(\"valueX\", 0);\r\n\r\n\t\t\t\t\t\t\tif (goesUp) {\r\n\t\t\t\t\t\t\t\tif (low <= zigZagValue) {\r\n\t\t\t\t\t\t\t\t\tzigZagValue = low;\r\n\t\t\t\t\t\t\t\t\tzigZagTime = time;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse if (high >= zigZagValue * (1 + deviation)) {\r\n\t\t\t\t\t\t\t\t\tlet b = Math.max(0, i - depth);\r\n\t\t\t\t\t\t\t\t\tlet skip = false;\r\n\t\t\t\t\t\t\t\t\tfor (let k = i; k > b; k--) {\r\n\t\t\t\t\t\t\t\t\t\tif (high < dataItems[k].get(\"highValueY\")) {\r\n\t\t\t\t\t\t\t\t\t\t\tskip = true;\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (!skip) {\r\n\t\t\t\t\t\t\t\t\t\tdata.push({ time: zigZagTime, zigzag: zigZagValue });\r\n\t\t\t\t\t\t\t\t\t\tzigZagValue = high;\r\n\t\t\t\t\t\t\t\t\t\tzigZagTime = time;\r\n\t\t\t\t\t\t\t\t\t\tgoesUp = false;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\tif (high >= zigZagValue) {\r\n\t\t\t\t\t\t\t\t\tzigZagValue = high;\r\n\t\t\t\t\t\t\t\t\tzigZagTime = time;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse if (low <= zigZagValue * (1 - deviation)) {\r\n\t\t\t\t\t\t\t\t\tlet b = Math.max(0, i - depth);\r\n\t\t\t\t\t\t\t\t\tlet skip = false;\r\n\t\t\t\t\t\t\t\t\tfor (let k = i; k > b; k--) {\r\n\t\t\t\t\t\t\t\t\t\tif (low > dataItems[k].get(\"lowValueY\")) {\r\n\t\t\t\t\t\t\t\t\t\t\tskip = true;\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (!skip) {\r\n\t\t\t\t\t\t\t\t\t\tdata.push({ time: zigZagTime, zigzag: zigZagValue });\r\n\t\t\t\t\t\t\t\t\t\tzigZagValue = low;\r\n\t\t\t\t\t\t\t\t\t\tzigZagTime = time;\r\n\t\t\t\t\t\t\t\t\t\tgoesUp = true;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tconst lastDataItem = dataItems[dataItems.length - 1];\r\n\t\t\t\t\t\tlet lastTime = lastDataItem.get(\"valueX\", 0);\r\n\t\t\t\t\t\tlet lastValue = lastDataItem.get(\"valueY\");\r\n\t\t\t\t\t\tlet lastHigh = lastDataItem.get(\"highValueY\", lastValue);\r\n\t\t\t\t\t\tlet lastLow = lastDataItem.get(\"lowValueY\", lastValue);\r\n\r\n\t\t\t\t\t\tif (zigZagValue < lastHigh) {\r\n\t\t\t\t\t\t\tdata.push({ time: lastTime, zigzag: lastLow });\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tdata.push({ time: lastTime, zigzag: lastHigh });\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.series.data.setAll(data);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}"]}