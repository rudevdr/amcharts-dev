{"version":3,"file":"Counter.js","sourceRoot":"","sources":["../../../../../../src/.internal/core/util/Counter.ts"],"names":[],"mappings":"AAQA;;GAEG;AACH,MAAM,OAAO,UAAU;IAKtB,YAAY,CAAa;QAJzB;;;;mBAA0B,CAAC;WAAC;QAC5B;;;;mBAA+B,KAAK;WAAC;QACrC;;;;;WAA+B;QAG9B,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;IACnB,CAAC;IAED,YAAY;QACX,EAAE,IAAI,CAAC,KAAK,CAAC;IACd,CAAC;IAED,YAAY;QACX,EAAE,IAAI,CAAC,KAAK,CAAC;QAEb,IAAI,IAAI,CAAC,KAAK,IAAI,CAAC,EAAE;YACpB,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;gBACpB,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;gBACtB,IAAI,CAAC,QAAQ,EAAE,CAAC;aAChB;SACD;IACF,CAAC;CACD","sourcesContent":["/**\n * @ignore\n */\nexport interface ICounterRef {\n\tincrementRef(): void;\n\tdecrementRef(): void;\n}\n\n/**\n * @ignore\n */\nexport class CounterRef {\n\tprotected _refs: number = 0;\n\tprotected _disposed: boolean = false;\n\tprotected _dispose: () => void;\n\n\tconstructor(f: () => void) {\n\t\tthis._dispose = f;\n\t}\n\n\tincrementRef() {\n\t\t++this._refs;\n\t}\n\n\tdecrementRef() {\n\t\t--this._refs;\n\n\t\tif (this._refs <= 0) {\n\t\t\tif (!this._disposed) {\n\t\t\t\tthis._disposed = true;\n\t\t\t\tthis._dispose();\n\t\t\t}\n\t\t}\n\t}\n}\n"]}